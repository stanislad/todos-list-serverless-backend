(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51],{4282:(e,t,o)=>{Promise.resolve().then(o.bind(o,9864))},8705:(e,t,o)=>{"use strict";o.d(t,{l:()=>a});var s=o(5155),n=o(6046),l=o(2115),i=o(7969);let a=e=>{let[t,o]=(0,l.useState)(e.todo.todo),[a,r]=(0,l.useState)("describe..."),{mutate:d}=(0,i.kp)(),u=(0,n.useRouter)();function c(e){let t=e.target.files[0];if(t){let e=new FileReader;e.onload=()=>{m(e.result)},e.readAsDataURL(t)}}let m=t=>{let o=t.split(";"),s=o[0].split(":")[1],n=o[1];d({id:e.todo.id,mime:s,image:n})},p=o=>{o.preventDefault(),e.callback(t,a)},h=t=>{t.preventDefault(),e.callbackDelete&&e.callbackDelete()};return(0,s.jsx)("div",{children:(0,s.jsxs)("form",{children:[(0,s.jsx)("div",{className:"space-y-12",children:(0,s.jsxs)("div",{className:"border-b border-gray-900/10 pb-12",children:[(0,s.jsx)("h2",{className:"text-base/7 font-semibold text-gray-900",children:"Profile"}),(0,s.jsx)("p",{className:"mt-1 text-sm/6 text-gray-600",children:"This information will be displayed publicly so be careful what you share."}),(0,s.jsx)("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,s.jsxs)("div",{className:"sm:col-span-4",children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm/6 font-medium text-gray-900",children:"Todo Title:"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{type:"name",autoComplete:"name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6",value:t,onChange:e=>o(e.target.value)})}),(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm/6 font-medium text-gray-900 pt-6",children:"Description:"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{type:"name",autoComplete:"name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6",value:a,onChange:e=>r(e.target.value)})}),(()=>{if(e.todo.imageUrl)return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm/6 font-medium text-gray-900 pt-6",children:"Image:"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("img",{src:e.todo.imageUrl,height:50,width:100})})]})})(),(()=>{if(e.editMode)return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm/6 font-medium text-gray-900 pt-6",children:"Choose Image:"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{type:"file",accept:".png,jpeg,.jpg",onChange:c})})]})})(),(()=>{if(e.editMode)return(0,s.jsx)("button",{onClick:e=>h(e),type:"button",className:"text-sm/6 font-semibold text-red-600 pt-6 pl-3",children:"Delete"})})()]})})]})}),(0,s.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,s.jsx)("button",{onClick:()=>u.back(),type:"button",className:"text-sm/6 font-semibold text-gray-900",children:"Cancel"}),(0,s.jsx)("button",{onClick:e=>p(e),type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Save"})]})]})})}},7969:(e,t,o)=>{"use strict";o.d(t,{Jm:()=>c,SB:()=>d,TP:()=>p,kp:()=>f,xV:()=>a});var s=o(5906),n=o(5848),l=o(1269),i=o(6046);let a=()=>{let e=(0,i.useRouter)(),t=(0,s.jE)();return(0,n.n)({mutationFn:e=>{let{id:t,name:o}=e;return r(t,o)},onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["todo"]}),e.push("/todo/")}})},r=(e,t)=>fetch(l.H$+"update/"+e,{mode:"cors",body:JSON.stringify({todo:t}),headers:{"Content-Type":"application/json"},method:"post"}).then(e=>e.json()),d=()=>{let e=(0,i.useRouter)(),t=(0,s.jE)();return(0,n.n)({mutationFn:e=>{let{name:t}=e;return u(t)},onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),e.push("/todo/")}})},u=e=>fetch(l.H$+"create/",{mode:"cors",body:JSON.stringify({todo:e}),headers:{"Content-Type":"application/json"},method:"post"}).then(e=>e.json()),c=()=>{let e=(0,i.useRouter)(),t=(0,s.jE)();return(0,n.n)({mutationFn:e=>{let{id:t}=e;return m(t)},onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),e.push("/todo/")}})},m=e=>fetch(l.H$+"delete/"+e,{mode:"cors",headers:{"Content-Type":"application/json"},method:"delete"}).then(e=>e.json()),p=()=>{let e=(0,s.jE)();return(0,n.n)({mutationFn:e=>{let{id:t,completed:o}=e;return h(t,o)},onSuccess:()=>{e.invalidateQueries({queryKey:["todos"]})}})},h=(e,t)=>fetch(l.H$+"complete/"+e,{mode:"cors",body:JSON.stringify({completed:t}),headers:{"Content-Type":"application/json"},method:"put"}).then(e=>e.json()),f=()=>{let e=(0,s.jE)();return(0,n.n)({mutationFn:e=>{let{id:t,mime:o,image:s}=e;return x(t,o,s)},onSuccess:()=>{e.invalidateQueries({queryKey:["todo"]})}})},x=(e,t,o)=>fetch(l.H$+"upload/"+e,{mode:"cors",body:JSON.stringify({mime:t,image:o}),headers:{"Content-Type":"application/json"},method:"put"}).then(e=>e.json())},1269:(e,t,o)=>{"use strict";o.d(t,{Cy:()=>l,H$:()=>n,jp:()=>a});var s=o(547);let n="https://hfyi00ou55.execute-api.eu-west-1.amazonaws.com/dev/",l=()=>(0,s.I)({queryKey:["todos"],queryFn:i}),i=()=>fetch(n,{mode:"cors",headers:{"Content-Type":"application/json"}}).then(e=>e.json()),a=e=>(0,s.I)({queryKey:["todo",e],queryFn:()=>r(e),enabled:!!e}),r=e=>fetch(n+e,{mode:"cors",headers:{"Content-Type":"application/json"}}).then(e=>e.json())},9864:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});var s=o(5155),n=o(8705),l=o(7969),i=o(1269),a=o(2115);function r(e){let{params:t}=e,{id:o}=(0,a.use)(t),{data:r,isLoading:d,refetch:u}=(0,i.jp)(o),{mutate:c}=(0,l.xV)(),{mutate:m}=(0,l.Jm)();return((0,a.useEffect)(()=>{o&&u()},[o,u]),d||!r)?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsx)("div",{children:(0,s.jsx)(n.l,{todo:r,callback:e=>{c({id:o,name:e})},editMode:!0,callbackDelete:()=>{m({id:o})},createMode:!0})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[239,701,441,517,358],()=>t(4282)),_N_E=e.O()}]);